{% trans_default_domain "victoire" %}
{% extends 'VictoireCoreBundle:Widget:edit.html.twig' %}

{% block form %}

<div class="vic-tab-content vic-modal-tab-content">
{% if entity %}




        <div id="picker-{{entity}}" class="vic-tab-pane vic-active">

            {% block form_picker %}
                {{form_widget(form.entity)}}
                {{form_row(form.fields)}}

            {% endblock form_picker %}
        </div>
        <div id="query-{{entity}}" class="vic-tab-pane">

        {% block form_query %}
            {{form_row(form.query)}}
        {% endblock form_query %}
        </div>




{% else %}
    {{ form_row(form.image) }}
    {{ form_row(form.alt) }}
    {{ form_row(form.title) }}
    {{ form_row(form.linkType) }}
    <div class="vic-linkType vic-linkType-url{% if form.vars.value.linkType != "url" %} vic-hidden{% endif %}">
        {{ form_row(form.url) }}
    </div>
    <div class="vic-linkType vic-linkType-page{% if form.vars.value.linkType != "page" %} vic-hidden{% endif %}">
        {{ form_row(form.relatedPage) }}
    </div>
{% endif %}
{{form_rest(form)}}
{{form_errors(form)}}
</div>

<script type="text/javascript">
    $vic('#appventus_victoireCoreBundle_widgetimagetype_linkType').on('change', function(){
        $vic('.vic-linkType').addClass('vic-hidden');
        if ($vic(this).val() == 'url') {
            $vic('.vic-linkType-url').removeClass('vic-hidden');
        } else if ($vic(this).val() == 'page') {
            $vic('.vic-linkType-page').removeClass('vic-hidden');
        }
    });
</script>

{% endblock form %}
